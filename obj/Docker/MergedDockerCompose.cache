services:
  autofunnerworker:
    build:
      context: C:\work\AutoSalesFunner
      dockerfile: AutoFunnerWorker/Dockerfile
    environment:
      ASPNETCORE_ENVIRONMENT: Development
      ASPNETCORE_URLS: https://+:443;http://+:80
      ConnectionString: User ID=postgres;Password=qw12cv90;Host=db;Port=5432;Database=test_db;Timeout=30;CommandTimeout=120;
    image: auto_funner_worker
    ports:
    - target: 80
    - target: 443
    restart: always
    volumes:
    - C:\Users\User\AppData\Roaming\ASP.NET\Https:/root/.aspnet/https:ro
    - C:\Users\User\AppData\Roaming\Microsoft\UserSecrets:/root/.microsoft/usersecrets:ro
  db:
    build:
      context: C:\work\AutoSalesFunner
      dockerfile: Infrastructure/DB/Dockerfile
    environment:
      POSTGRES_DB: test_db
      POSTGRES_PASSWORD: qw12cv90
      POSTGRES_USER: postgres
    image: db
    ports:
    - published: 54322
      target: 5432
    restart: always
version: '3.4'